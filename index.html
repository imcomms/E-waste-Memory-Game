<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-waste Memory Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            touch-action: manipulation;
        }
        .perspective {
            perspective: 1000px;
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
        }
        .card-front {
            transform: rotateY(180deg);
        }
        .card.matched .card-inner {
            opacity: 1; /* Keep matched cards fully visible */
        }

        #background-wrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
        }
        .dot {
            position: absolute;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            animation: move linear infinite;
        }
        @keyframes move {
            0% { transform: translateY(100vh) scale(1); opacity: 1; }
            50% { opacity: 0.8; }
            100% { transform: translateY(-10vh) scale(0.5); opacity: 0; }
        }
        header, #bottom-section {
            position: relative;
            z-index: 1;
        }

        /* 2. Default background for mobile */
        #game-container {
            background-image: 
                url('Asset 3.png');
            background-color: #f5f3e2;
            background-size: contain; 
            background-position: top;
            background-repeat: no-repeat;
        }

        /* 2. Wider background for laptop/large screens (1024px and up) */
        @media (min-width: 1024px) {
            #game-container {
                /* CUSTOMIZATION: Change the WIDE background image URL for large screens below */
                background-image: 
                    url('Asset 7.png');
                background-position: top;
            }
        }
    </style>
</head>
<body class="bg-white">

            <!-- Main container with responsive classes -->
    <div id="game-container" 
         class="text-white min-h-screen flex flex-col items-center p-4 max-w-md mx-auto shadow-2xl relative overflow-y-auto 
                    lg:max-w-full lg:h-screen lg:overflow-hidden lg:p-8 lg:justify-center">

        <!-- Header with responsive layout -->
        <header class="w-full flex items-center justify-center p-4 flex-shrink-0 rounded-xl relative overflow-hidden lg:bg-transparent lg:shadow-none lg:-top-10 lg:py-0 lg:gap-8" 
        >
            <div class="absolute inset-x-0 top-0 bg-black opacity-30 lg:hidden"></div> <!-- Overlay for mobile header only -->
            
            <!-- Invisible spacer for laptop view to balance the logo and center the text -->
            <div class="hidden lg:block w-32"></div>

            <!-- 3. Text Box (75% on mobile, centered on large screens) -->
            <div class="w-4/5 text-left relative -left-10 lg:-left-2 lg:w-64">
                <!-- 2. "National Environment Agency" text added for mobile only -->
                <p class="text-lg font-bold text-neutral-50 lg:hidden">National Environment Agency</p>
                <h1 class="text-4xl lg:text-4xl font-bold text-neutral-50">Match it Right!</h1>
                <p class="text-neutral-50 mt-0 text-base lg:text-lg break-normal">E-waste Memory Game!<p class = "text-neutral-50 mt-0 text-base break-normal leading-5">Match the e-waste and discover why proper recycling matters.</p>
                <div class="grid grid-cols-2 grid-rows-1 mt-1 flex flex-row items-start gap-1 lg:mt-3 lg:flex-row lg:inline-flex lg:gap-20">

                    <p class="text-slate-950 font-bold lg:text-xl mt-2 lg:4 bg-neutral-50 w-4/5 lg:w-full lg:px-4 text-center rounded-lg shadow-lg whitespace-nowrap"><span class="font-bold text-slate-950" id="moves-counter">0</span> Moves</p>
                    <p class="text-slate-950 font-bold lg:text-xl mt-2 lg:4 bg-neutral-50 w-full lg:px-4 text-center rounded-lg shadow-lg whitespace-nowrap"><span class="font-bold text-slate-950" id="matches-counter">0 / 10</span> Matches</p>
                </div>
            </div>
            
            <!-- 3. Logo (hidden on mobile, next to text on large screens) -->
            <div class="hidden lg:flex justify-center items-center relative lg:-top-4">
                <img src="NEA logo white.png" alt="Game Logo" class="h-20 w-20 object-contain lg:h-64 lg:w-64">
            </div>
        </header>

        <!-- Game section -->
        <div id="bottom-section" class="w-full flex-grow flex flex-col items-center justify-center lg:-top-10">
            <div id="game-area" class="w-full flex flex-col items-center justify-center">
                <!-- 1. Game board with 4 columns on mobile, 5 on large screens -->
                <main id="game-board" class="lg:mt-4 w-full max-w-3xl lg:max-w-xl grid grid-cols-4 lg:grid-cols-5 gap-2"></main>
                <button id="reset-button" class="mt-8 lg:mt-6 bg-[#d2e178] hover:bg-[#b5c64e] text-white font-bold py-2 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105">
                    Reset Game
                </button>
            </div>

            <!-- Win Screen -->
            <div id="win-screen" class="hidden w-full flex flex-col items-center justify-center text-center">
                <img src="Asset 6.png" alt="Victory" class="w-3/4 lg:-top-10 lg:max-h-48 lg:w-fit max-w-sm mb-8 lg:mb-8 rounded-lg border-none">
                <div class="bg-neutral-50 bg-opacity-80 backdrop-blur-sm rounded-lg p-8 lg:p-6 w-full lg:w-2/3">
                    <h2 class="text-3xl font-bold text-slate-950 mb-4 lg:mb-2">üß© Well Done! üåç</h2>
                    <p class="text-slate-950 mb-2">You've matched all the cards correctly!<p class = "text-slate-950 mb-2 break-normal">By learning the right way to recycle e-waste, you're helping to protect our environment and give old electronics a new life.üå±<p class = "text-slate-950 mb-2 break-normal">Remember: Use the right bins or collection services for your e-waste. Every small action make a big difference!</p>
                    <button id="play-again-button" class="bg-neutral-100 hover:bg-neutral-200 text-slate-950 font-bold py-2 px-6 rounded-lg shadow-lg">
                        Play Again
                    </button>
                </div>
            </div>
            <!-- Countdown Timer -->
            <div id="countdown-timer" class="hidden absolute inset-0 flex items-center justify-center text-9xl font-bold text-black pointer-events-none z-20 rounded-md"></div>
        </div>
    </div>

    <!-- Pop-up Box for a successful match (remains unchanged) -->
    <div id="match-modal" class="fixed inset-1 center bg-black bg-opacity-80 flex items-center justify-center hidden z-50">
        <div class="bg-neutral-50 rounded-lg shadow-2xl p-8 text-center max-w-md w-10/12 mx-4">
            <img id="match-modal-image" src="" alt="Match Success" class="w-40 h-40 object-cover rounded-lg mx-auto mb-4">
            <p id="match-modal-text" class="text-slate-950 mb-6 text-lg"></p>
            <button id="next-match-button" class="bg-[#d2e178] hover:bg-[#b5c64e] text-white font-bold py-2 px-6 rounded-lg">
                Next
            </button>
        </div>
    </div>

        <!-- 1. Pop-up Box for Starting the Game -->
    <div id="start-modal" class="fixed inset-0 bg-opacity-80 flex items-center justify-center hidden z-50">
        <div class="bg-[#f7f5e0] rounded-lg shadow-2xl p-8 text-center max-w-md w-11/12 mx-4">
            <h2 class="text-3xl font-bold text-[#d2e178] mb-4">Ready to Play?</h2>

            <button id="start-game-button" class="bg-[#d2e178] hover:bg-[#b5c64e] text-white font-bold py-2 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105">
                Start Game
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gameContainer = document.getElementById('game-container');
            const backgroundWrap = document.createElement('div');
            backgroundWrap.id = 'background-wrap';
            gameContainer.prepend(backgroundWrap);

            const numDots = 50; 
            for (let i = 0; i < numDots; i++) {
                const dot = document.createElement('div');
                dot.classList.add('dot');
                const size = Math.random() * 2 + 1;
                dot.style.width = `${size}px`;
                dot.style.height = `${size}px`;
                dot.style.left = `${Math.random() * 100}%`;
                const animationDuration = Math.random() * 15 + 15;
                dot.style.animationDuration = `${animationDuration}s`;
                const animationDelay = Math.random() * -animationDuration; 
                dot.style.animationDelay = `${animationDelay}s`;
                backgroundWrap.appendChild(dot);
            }

            const gameArea = document.getElementById('game-area');
            const gameBoard = document.getElementById('game-board');
            const resetButton = document.getElementById('reset-button');
            const winScreen = document.getElementById('win-screen');
            const playAgainButton = document.getElementById('play-again-button');
            const matchModal = document.getElementById('match-modal');
            const matchModalImage = document.getElementById('match-modal-image');
            const matchModalText = document.getElementById('match-modal-text');
            const nextMatchButton = document.getElementById('next-match-button');
            const movesCounter = document.getElementById('moves-counter');
            const matchesCounter = document.getElementById('matches-counter');
            const startModal = document.getElementById('start-modal');
            const startGameButton = document.getElementById('start-game-button');
            const countdownTimer = document.getElementById('countdown-timer');

            const cardPairs = [
                { 
                    value: '<img src="NEA_IEWD_Gamification-01.jpg" alt="aaa">', 
                    pairId: 'item1',
                    matchInfo: { image: 'NEA_IEWD_Gamification-01.jpg', text: 'Small household batteries can go into the Batteries Bin.' }
                }, 
                { 
                    value: '<img src="NEA_IEWD_Gamification-01.jpg" alt="AAA">', 
                    pairId: 'item1',
                    matchInfo: { image: 'NEA_IEWD_Gamification-01.jpg', text: 'Small household batteries can go into the Batteries Bin.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-02.jpg" alt="bbb">', 
                    pairId: 'item2',
                    matchInfo: { image: 'NEA_IEWD_Gamification-02.jpg', text: 'The Batteries & Bulbs Bin accepts used light bulbs and small household batteries.' }
                }, 
                { 
                    value: '<img src="NEA_IEWD_Gamification-02.jpg" alt="BBB">', 
                    pairId: 'item2',
                    matchInfo: { image: 'NEA_IEWD_Gamification-02.jpg', text: 'The Batteries & Bulbs Bin accepts used light bulbs and small household batteries.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-03.jpg" alt="ccc">', 
                    pairId: 'item3',
                    matchInfo: { image: 'NEA_IEWD_Gamification-03.jpg', text: 'Bulbs may contain mercury. If not recycled properly, they risk contaminating the environment.' }
                }, 
                { 
                    value: '<img src="NEA_IEWD_Gamification-03.jpg" alt="CCC">', 
                    pairId: 'item3',
                    matchInfo: { image: 'NEA_IEWD_Gamification-03.jpg', text: 'Bulbs may contain mercury. If not recycled properly, they risk contaminating the environment.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-04.jpg" alt="ddd">', 
                    pairId: 'item4',
                    matchInfo: { image: 'NEA_IEWD_Gamification-04.jpg', text: 'Use the 3-in-1 bin for small batteries, bulbs, and ICT gadgets (like laptops, phones).' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-04.jpg" alt="ddd">', 
                    pairId: 'item4',
                    matchInfo: { image: 'NEA_IEWD_Gamification-04.jpg', text: 'Use the 3-in-1 bin for small batteries, bulbs, and ICT gadgets (like laptops, phones).' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-05.jpg" alt="eee">', 
                    pairId: 'item5',
                    matchInfo: { image: 'NEA_IEWD_Gamification-05.jpg', text: 'Laptops contain batteries and circuit boards with toxic substances that can pollute the environment if disposed of improperly.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-05.jpg" alt="EEE">', 
                    pairId: 'item5',
                    matchInfo: { image: 'NEA_IEWD_Gamification-05.jpg', text: 'Laptops contain batteries and circuit boards with toxic substances that can pollute the environment if disposed of improperly.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-06.jpg" alt="fff">', 
                    pairId: 'item6',
                    matchInfo: { image: 'NEA_IEWD_Gamification-06.jpg', text: 'Old phones are packed with gold, silver and copper. Recycling them saves precious resources.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-06.jpg" alt="FFF">', 
                    pairId: 'item6',
                    matchInfo: { image: 'NEA_IEWD_Gamification-06.jpg', text: 'Old phones are packed with gold, silver and copper. Recycling them saves precious resources.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-07.jpg" alt="ggg">', 
                    pairId: 'item7',
                    matchInfo: { image: 'NEA_IEWD_Gamification-07.jpg', text: 'Washing machines are full of recyclable metals such as steel and copper.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-07.jpg" alt="GGG">', 
                    pairId: 'item7',
                    matchInfo: { image: 'NEA_IEWD_Gamification-07.jpg', text: 'Washing machines are full of recyclable metals such as steel and copper.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-08.jpg" alt="hhh">', 
                    pairId: 'item8',
                    matchInfo: { image: 'NEA_IEWD_Gamification-08.jpg', text: 'Batteries contain heavy metals that can pollute the environment.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-08.jpg" alt="HHH">', 
                    pairId: 'item8',
                    matchInfo: { image: 'NEA_IEWD_Gamification-08.jpg', text: 'Batteries contain heavy metals that can pollute the environment.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-09.jpg" alt="iii">', 
                    pairId: 'item9',
                    matchInfo: { image: 'NEA_IEWD_Gamification-09.jpg', text: 'Televisions contain precious metals like silver, gold, palladium that can be reused in making new electronics.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-09.jpg" alt="III">', 
                    pairId: 'item9',
                    matchInfo: { image: 'NEA_IEWD_Gamification-09.jpg', text: 'Televisions contain precious metals like silver, gold, palladium that can be reused in making new electronics.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-10.jpg" alt="jjj">', 
                    pairId: 'item10',
                    matchInfo: { image: 'NEA_IEWD_Gamification-10.jpg', text: 'Power banks are portable batteries that pose fire risks if disposed of improperly.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-10.jpg" alt="JJJ">', 
                    pairId: 'item10',
                    matchInfo: { image: 'NEA_IEWD_Gamification-10.jpg', text: 'Power banks are portable batteries that pose fire risks if disposed of improperly.' }
                },
            ];

            // --- The rest of the JavaScript logic is unchanged ---

            let cardsArray = [...cardPairs];
            let firstCard = null;
            let secondCard = null;
            let lockBoard = false;
            let matchesFound = 0;
            let moves = 0;

            function shuffle(array) {
                array.sort(() => Math.random() - 0.5);
            }

            function createBoard() {
                gameBoard.innerHTML = '';
                matchesFound = 0;
                moves = 0;
                movesCounter.textContent = moves;
                matchesCounter.textContent = `${matchesFound} / ${cardsArray.length / 2}`;
                shuffle(cardsArray);
                lockBoard = true; // Lock board during preview

                cardsArray.forEach((cardData, index) => {
                    const card = document.createElement('div');
                    // Cards start unflipped
                    card.classList.add('card', 'aspect-square', 'w-full', 'cursor-pointer', 'perspective');
                    card.dataset.pairId = cardData.pairId;
                    card.dataset.index = index;
                    card.innerHTML = `
                        <div class="card-inner">
                            <div class="card-back bg-green-700 hover:bg-green-800 transition-colors overflow-hidden">
                                <img src="NEA_IEWD_Gamification-11.jpg" class="w-full h-full object-cover">
                            </div>
                            <div class="card-front bg-[#d2e178] flex items-center justify-center p-1 rounded-md">
                                ${cardData.value}
                            </div>
                        </div>
                    `;
                    gameBoard.appendChild(card);
                    card.addEventListener('click', flipCard);
                });

                // Show the start modal immediately
                startModal.classList.remove('hidden');
            }

            function flipCard() {
                if (lockBoard || this === firstCard || this.classList.contains('flipped')) return;
                this.classList.add('flipped');
                if (!firstCard) {
                    firstCard = this;
                } else {
                    secondCard = this;
                    checkForMatch();
                }
            }

            function checkForMatch() {
                lockBoard = true;
                moves++;
                movesCounter.textContent = moves;
                const isMatch = firstCard.dataset.pairId === secondCard.dataset.pairId;
                isMatch ? handleSuccessfulMatch() : unflipCards();
            }

            function handleSuccessfulMatch() {
                const info = cardsArray.find(c => c.pairId === firstCard.dataset.pairId).matchInfo;
                
                matchModalImage.src = info.image;
                matchModalText.textContent = info.text;
                
                setTimeout(() => {
                    matchModal.classList.remove('hidden');
                }, 600); 

                firstCard.classList.add('matched');
                secondCard.classList.add('matched');
                matchesFound++;
                matchesCounter.textContent = `${matchesFound} / ${cardsArray.length / 2}`;
            }

            function unflipCards() {
                setTimeout(() => {
                    firstCard.classList.remove('flipped');
                    secondCard.classList.remove('flipped');
                    resetBoardState();
                }, 1200);
            }
            
            function resetBoardState() {
                [firstCard, secondCard, lockBoard] = [null, null, false];
            }

            function closeMatchModal() {
                matchModal.classList.add('hidden');
                resetBoardState();
                
                if (matchesFound === cardsArray.length / 2) {
                    setTimeout(showWinScreen, 800);
                }
            }

            function showWinScreen() {
                gameArea.classList.add('hidden');
                winScreen.classList.remove('hidden');
            }

            function resetGame() {
                clearInterval(countdownInterval); // Clear countdown if it's running
                countdownTimer.classList.add('hidden');
                winScreen.classList.add('hidden');
                gameArea.classList.remove('hidden');
                matchModal.classList.add('hidden');
                startModal.classList.add('hidden'); // Ensure start modal is hidden on reset
                resetBoardState();
                createBoard();
            }

            // 1. Function to start the game after preview
            function startGame() {
                startModal.classList.add('hidden');
                const allCards = document.querySelectorAll('.card');
                allCards.forEach(card => card.classList.add('flipped'));
                
                // Start the countdown
                startCountdown();
            }

            function startCountdown() {
                let countdownValue = 5; // CUSTOMIZATION: Change countdown time here (in seconds)
                countdownTimer.textContent = countdownValue;
                countdownTimer.classList.remove('hidden');

                countdownInterval = setInterval(() => {
                    countdownValue--;
                    if (countdownValue > 0) {
                        countdownTimer.textContent = countdownValue;
                    } else {
                        clearInterval(countdownInterval);
                        countdownTimer.textContent = '';
                        countdownTimer.classList.add('hidden');
                        
                        // Flip cards back
                        const allCards = document.querySelectorAll('.card');
                        allCards.forEach(card => card.classList.remove('flipped'));
                        
                        // Unlock board after flip animation
                        setTimeout(() => {
                            lockBoard = false;
                        }, 600); // This should match the CSS transition duration
                    }
                }, 1000);
            }
            
            resetButton.addEventListener('click', resetGame);
            playAgainButton.addEventListener('click', resetGame);
            nextMatchButton.addEventListener('click', closeMatchModal);
            startGameButton.addEventListener('click', startGame);
            
            createBoard();
        });
    </script>
</body>
</html>
