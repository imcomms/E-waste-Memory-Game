<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-waste Memory Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            touch-action: manipulation;
        }
        .perspective {
            perspective: 1000px;
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
        }
        .card-front {
            transform: rotateY(180deg);
        }
        .card.matched .card-inner {
            opacity: 1; /* Keep matched cards fully visible */
        }

        /* Styling for the animated background dots */
        #background-wrap {
            position: absolute; /* Changed to absolute to stay within the container */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0; /* Behind content but inside container */
        }
        .dot {
            position: absolute;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            animation: move linear infinite;
        }
        @keyframes move {
            0% { transform: translateY(100vh) scale(1); opacity: 1; }
            50% { opacity: 0.8; }
            100% { transform: translateY(-10vh) scale(0.5); opacity: 0; }
        }
        /* Ensure content is above the background dots */
        header, #bottom-section {
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body class="bg-white">

    <!-- Main container to enforce mobile view on all screen sizes -->
    <div id="game-container" 
            class="bg-no-repeat bg-contain bg-center bg-blend-saturation  text-white min-h-screen flex flex-col items-center p-4 max-w-md mx-auto shadow-2xl relative overflow-y-auto" 
            style="
                background-image: 
                    linear-gradient(to top right, #06b6d4, #0369a1),
                    url('Asset 3.png'); 
                background-size: cover, contain; /* first layer = cover, second = contain */
                background-repeat: no-repeat, no-repeat;
                background-position: center, top;
            ">
        <!-- Header with 75/25 split -->
        <header class="w-full flex items-center justify-between p-4 flex-shrink-0 rounded-xl  relative overflow-hidden">
            <div class="absolute inset-x-0 top-0 bg-black opacity-30"></div> <!-- This is the overlay for text readability -->
            <!-- Text Box (75%) -->
            <div class="w-4/5 text-left">
                <h1 class="text-4xl font-bold text-justify text-neutral-50">Match It Right!</h1>
                <p class="text-neutral-50 mt-1 text-base break-normal">Play the E-Waste Memory Game! <p class = "text-neutral-50 mt-1 text-base break-normal leading-5">Match gadgets and discover why recycling them matters.</p>
                <div class="grid grid-cols-2 grid-rows-1 gap-1">
                    <p class="text-base mt-2 bg-sky-700 w-3/5 text-center rounded-lg shadow-lg"><span class="font-bold text-neutral-50" id="moves-counter">0</span> Moves</p>
                    <p class="text-base mt-2 bg-sky-700 w-full text-center rounded-lg shadow-lg"><span class="font-bold text-neotral-50" id="matches-counter">0 / 10</span> Matches</p>
                </div>
            </div>
            <!-- Logo (25%) -->
            <div class="w-1/5 flex justify-end">
                <img src="NEA logo white.png" alt="Game Logo" class="h-20 w-20 object-contain absolute top-0 right-0">
            </div>
        </header>

        <!-- Game section -->
        <div id="bottom-section" class="w-full flex-grow flex flex-col items-center justify-center">
            <div id="game-area" class="w-full flex flex-col items-center justify-center">
                <!-- Game board now always 4 columns -->
                <main id="game-board" class="w-full max-w-3xl grid grid-cols-4 gap-3"></main>
                <button id="reset-button" class="mt-8 bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-2 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105">
                    Reset Game
                </button>
            </div>

            <!-- Win Screen -->
            <div id="win-screen" class="hidden w-full flex flex-col items-center justify-center text-center">
                <img src="Asset 2.png" alt="Victory" class="w-3/4 max-w-sm mb-6 rounded-lg border-none">
                <div class="bg-neutral-50 bg-opacity-80 backdrop-blur-sm rounded-lg p-8 w-full">
                    <h2 class="text-3xl font-bold text-slate-950 mb-6">üß©Well Done!üåç</h2>
                    <p class="text-slate-950 mb-4">You've matched all the cards correctly.<p class = "text-slate-950 mb-4 break-normal">By learning the right way to recycle e-waste, you're helping to protect our environment and give old electronics a new life.üå±<p class = "text-slate-950 mb-5 break-normal">Remember: Use the right bins or collection services for your e-waste. Every small action make a big difference!</p>
                    <button id="play-again-button" class="bg-neutral-100 hover:bg-neutral-200 text-slate-950 font-bold py-2 px-6 rounded-lg shadow-lg">
                        Play Again
                    </button>
                </div>
            </div>
        </div>

        <!-- Pop-up Box for a successful match -->
        <div id="match-modal" class="fixed inset-1 center bg-black bg-opacity-80 flex items-center justify-center hidden z-50">
            <div class="bg-neutral-50 rounded-lg shadow-2xl p-8 text-center max-w-md w-10/12 mx-4">
                <img id="match-modal-image" src="" alt="Match Success" class="w-40 h-40 object-cover rounded-lg mx-auto mb-4">
                <p id="match-modal-text" class="text-slate-950 mb-6 text-lg"></p>
                <button id="next-match-button" class="bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-6 rounded-lg">
                    Next
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gameContainer = document.getElementById('game-container');
            const backgroundWrap = document.createElement('div');
            backgroundWrap.id = 'background-wrap';
            gameContainer.prepend(backgroundWrap); // Prepend to game-container

            const numDots = 50; 
            for (let i = 0; i < numDots; i++) {
                const dot = document.createElement('div');
                dot.classList.add('dot');
                const size = Math.random() * 2 + 1;
                dot.style.width = `${size}px`;
                dot.style.height = `${size}px`;
                dot.style.left = `${Math.random() * 100}%`;
                const animationDuration = Math.random() * 15 + 15;
                dot.style.animationDuration = `${animationDuration}s`;
                const animationDelay = Math.random() * -animationDuration; 
                dot.style.animationDelay = `${animationDelay}s`;
                backgroundWrap.appendChild(dot);
            }

            const gameArea = document.getElementById('game-area');
            const gameBoard = document.getElementById('game-board');
            const matchModal = document.getElementById('match-modal');
            const resetButton = document.getElementById('reset-button');
            const winScreen = document.getElementById('win-screen');
            const playAgainButton = document.getElementById('play-again-button');
            const matchModalImage = document.getElementById('match-modal-image');
            const matchModalText = document.getElementById('match-modal-text');
            const nextMatchButton = document.getElementById('next-match-button');
            const movesCounter = document.getElementById('moves-counter');
            const matchesCounter = document.getElementById('matches-counter');

            const cardPairs = [
                { 
                    value: '<img src="NEA_IEWD_Gamification-01.jpg" alt="aaa">', 
                    pairId: 'item1',
                    matchInfo: { image: 'NEA_IEWD_Gamification-01.jpg', text: 'Only small household batteries (AA, AAA, AAAA, D, C, 9V & button cells) can go into the Batteries Bin.' }
                }, 
                { 
                    value: '<img src="NEA_IEWD_Gamification-01.jpg" alt="AAA">', 
                    pairId: 'item1',
                    matchInfo: { image: 'NEA_IEWD_Gamification-01.jpg', text: 'Only small household batteries (AA, AAA, AAAA, D, C, 9V & button cells) can go into the Batteries Bin.' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-02.jpg" alt="bbb">', 
                    pairId: 'item2',
                    matchInfo: { image: 'NEA_IEWD_Gamification-02.jpg', text: 'The Batteries & Bulbs Bin accepts used light bulbs and small household batteries (AA, AAA, AAAA, D, C, 9V & button cells). ' }
                }, 
                { 
                    value: '<img src="NEA_IEWD_Gamification-02.jpg" alt="BBB">', 
                    pairId: 'item2',
                    matchInfo: { image: 'NEA_IEWD_Gamification-02.jpg', text: 'The Batteries & Bulbs Bin accepts used light bulbs and small household batteries (AA, AAA, AAAA, D, C, 9V & button cells). ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-03.jpg" alt="ccc">', 
                    pairId: 'item3',
                    matchInfo: { image: 'NEA_IEWD_Gamification-03.jpg', text: 'Bulbs may contain mercury. If thrown away, they risk contaminating the environment. ' }
                }, 
                { 
                    value: '<img src="NEA_IEWD_Gamification-03.jpg" alt="CCC">', 
                    pairId: 'item3',
                    matchInfo: { image: 'NEA_IEWD_Gamification-03.jpg', text: 'Bulbs may contain mercury. If thrown away, they risk contaminating the environment. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-04.jpg" alt="ddd">', 
                    pairId: 'item4',
                    matchInfo: { image: 'NEA_IEWD_Gamification-04.jpg', text: 'Use the 3-in-1 bin for small batteries, bulbs, and ICT gadgets (like laptops, phones & TVs) that fit through its slot. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-04.jpg" alt="ddd">', 
                    pairId: 'item4',
                    matchInfo: { image: 'NEA_IEWD_Gamification-04.jpg', text: 'Use the 3-in-1 bin for small batteries, bulbs, and ICT gadgets (like laptops, phones & TVs) that fit through its slot. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-05.jpg" alt="eee">', 
                    pairId: 'item5',
                    matchInfo: { image: 'NEA_IEWD_Gamification-05.jpg', text: 'Laptops contain batteries and circuit boards with toxic substances. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-05.jpg" alt="EEE">', 
                    pairId: 'item5',
                    matchInfo: { image: 'NEA_IEWD_Gamification-05.jpg', text: 'Laptops contain batteries and circuit boards with toxic substances. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-06.jpg" alt="fff">', 
                    pairId: 'item6',
                    matchInfo: { image: 'NEA_IEWD_Gamification-06.jpg', text: 'Old phones are packed with gold, silver and copper. Recycling millions of them saves tonnes of precious resources. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-06.jpg" alt="FFF">', 
                    pairId: 'item6',
                    matchInfo: { image: 'NEA_IEWD_Gamification-06.jpg', text: 'Old phones are packed with gold, silver and copper. Recycling millions of them saves tonnes of precious resources. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-07.jpg" alt="ggg">', 
                    pairId: 'item7',
                    matchInfo: { image: 'NEA_IEWD_Gamification-07.jpg', text: 'Old phones are packed with gold, silver and copper. Recycling millions of them saves tonnes of precious resources. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-07.jpg" alt="GGG">', 
                    pairId: 'item7',
                    matchInfo: { image: 'NEA_IEWD_Gamification-07.jpg', text: 'Old phones are packed with gold, silver and copper. Recycling millions of them saves tonnes of precious resources. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-08.jpg" alt="hhh">', 
                    pairId: 'item8',
                    matchInfo: { image: 'NEA_IEWD_Gamification-08.jpg', text: 'Even small batteries can leak acid and heavy metals into soil and water. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-08.jpg" alt="HHH">', 
                    pairId: 'item8',
                    matchInfo: { image: 'NEA_IEWD_Gamification-08.jpg', text: 'Even small batteries can leak acid and heavy metals into soil and water. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-09.jpg" alt="iii">', 
                    pairId: 'item9',
                    matchInfo: { image: 'NEA_IEWD_Gamification-09.jpg', text: 'Even small batteries can leak acid and heavy metals into soil and water. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-09.jpg" alt="III">', 
                    pairId: 'item9',
                    matchInfo: { image: 'NEA_IEWD_Gamification-09.jpg', text: 'Even small batteries can leak acid and heavy metals into soil and water. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-10.jpg" alt="jjj">', 
                    pairId: 'item10',
                    matchInfo: { image: 'NEA_IEWD_Gamification-10.jpg', text: 'Power banks contain lithium batteries that can spark fire if trashed. ' }
                },
                { 
                    value: '<img src="NEA_IEWD_Gamification-10.jpg" alt="JJJ">', 
                    pairId: 'item10',
                    matchInfo: { image: 'NEA_IEWD_Gamification-10.jpg', text: 'Power banks contain lithium batteries that can spark fire if trashed. ' }
                },
            ];

            let cardsArray = [...cardPairs];
            let firstCard = null;
            let secondCard = null;
            let lockBoard = false;
            let matchesFound = 0;
            let moves = 0;

            function shuffle(array) {
                array.sort(() => Math.random() - 0.5);
            }

            function createBoard() {
                gameBoard.innerHTML = '';
                matchesFound = 0;
                moves = 0;
                movesCounter.textContent = moves;
                matchesCounter.textContent = `${matchesFound} / ${cardsArray.length / 2}`;
                shuffle(cardsArray);

                cardsArray.forEach((cardData, index) => {
                    const card = document.createElement('div');
                    card.classList.add('card', 'aspect-square', 'w-full', 'cursor-pointer', 'perspective');
                    card.dataset.pairId = cardData.pairId;
                    card.dataset.index = index;
                    card.innerHTML = `
                        <div class="card-inner">
                            <div class="card-back bg-green-700 hover:bg-green-800 transition-colors overflow-hidden">
                                <img src="NEA_IEWD_Gamification.jpg" alt="Card Back" class="w-full h-full object-cover">
                            </div>
                            <div class="card-front bg-sky-300 flex items-center justify-center p-1 rounded-md">
                                ${cardData.value}
                            </div>
                        </div>
                    `;
                    gameBoard.appendChild(card);
                    card.addEventListener('click', flipCard);
                });
            }

            function flipCard() {
                if (lockBoard || this === firstCard || this.classList.contains('flipped')) return;
                this.classList.add('flipped');
                if (!firstCard) {
                    firstCard = this;
                } else {
                    secondCard = this;
                    checkForMatch();
                }
            }

            function checkForMatch() {
                lockBoard = true;
                moves++;
                movesCounter.textContent = moves;
                const isMatch = firstCard.dataset.pairId === secondCard.dataset.pairId;
                isMatch ? handleSuccessfulMatch() : unflipCards();
            }

            function handleSuccessfulMatch() {
                const info = cardsArray.find(c => c.pairId === firstCard.dataset.pairId).matchInfo;
                
                matchModalImage.src = info.image;
                matchModalText.textContent = info.text;
                
                setTimeout(() => {
                    matchModal.classList.remove('hidden');
                }, 600); 

                firstCard.classList.add('matched');
                secondCard.classList.add('matched');
                matchesFound++;
                matchesCounter.textContent = `${matchesFound} / ${cardsArray.length / 2}`;
            }

            function unflipCards() {
                setTimeout(() => {
                    firstCard.classList.remove('flipped');
                    secondCard.classList.remove('flipped');
                    resetBoardState();
                }, 1200);
            }
            
            function resetBoardState() {
                [firstCard, secondCard, lockBoard] = [null, null, false];
            }

            function closeMatchModal() {
                matchModal.classList.add('hidden');
                resetBoardState();
                
                if (matchesFound === cardsArray.length / 2) {
                    setTimeout(showWinScreen, 800);
                }
            }

            function showWinScreen() {
                gameArea.classList.add('hidden');
                winScreen.classList.remove('hidden');
            }

            function resetGame() {
                winScreen.classList.add('hidden');
                gameArea.classList.remove('hidden');
                matchModal.classList.add('hidden');
                resetBoardState();
                createBoard();
            }
            
            resetButton.addEventListener('click', resetGame);
            playAgainButton.addEventListener('click', resetGame);
            nextMatchButton.addEventListener('click', closeMatchModal);
            
            createBoard();
        });
    </script>
</body>
</html>
